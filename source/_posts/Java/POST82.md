---
title: 三目运算详解
tags:
  - 三目运算
category: backend
abbrlink: 44114
date: 2017-12-05 12:54:36
---
![image](http://ovi3ob9p4.bkt.clouddn.com/TIETU/CT0016.jpg)

三目运算符，又称条件运算符，指的是计算机语言的重要组成部分。它是唯一有3个操作数的运算符，所以有时又称为三元运算符。一般来说，三目运算符的结合性是右结合的。

对于条件表达式b ? x : y，先计算条件b，然后进行判断。如果b的值为true，计算x的值，运算结果为x的值；否则，计算y的值，运算结果为y的值。一个条件表达式绝不会既计算x，又计算y。条件运算符是右结合的，也就是说，从右向左分组计算。例如，a ? b : c ? d : e将按a ? b : (c ? d : e)执行。[1][ ]()

<表达式1> ? <表达式2> : <表达式3>; "?"运算符的含义是：先求表达式1的值，如果为真，则执行表达式2，并返回表达式2的结果；如果表达式1的值为假，则执行表达式3，并返回表达式3的结果。

可以理解为**条件 ? 结果1 : 结果2** 里面的？号是格式要求。也可以理解为是不是条件成立，条件成立为结果1否则为结果2。

注意：在C语言中，结果1 和 结果2的类型必须一致。

a ? b : c简单理解方式为:

```java
if(a) {
    return b;
} else {
    return c; 
}
```
<!--more-->
对于有些选择分支结构,可以使用简单的条件运算符来代替. 如:


```c
if(a<b)
    min=a;
else
    min=b;
```


可以用下面的条件运算符来处理


```c
min=(a<b)?a:b;
```

**其中"(a<b)?a:b"是一个"条件表达式",它是这样执行的:　　如果a<b为真,则表达式取a值,否则取b值.**

条件运算符由两个符号组成"?"和":",要求有3个操作对象,所以也叫它三目运算符,它是C语言中唯一的三目运算符.

　　它的一般形式为:

**表达式1?表达式2:表达式3;**

**以下是关于条件运算符的几点说明:**

- 通常情况下,表达式1是关系表达式或逻辑表达式,用于描述条件表达式中的条件,表达式2和表达式3可以是常量,变量或表达式.例如:

```java
(x==y)?'Y':'N'
(d=b*b-4*a*c)>=0?sqrt(d):sqrt(-d)
ch=(ch>='A'&&ch<='Z')?(ch+32):ch
```
以上均为合法的条件表达式.

- 条件表达式的执行顺序为:先求解表达式1,若值为非0,表示条件为真,则求解表达式2,此时表达式2的值就作为整个条件表达式的值;

若表达式1的值为0,表示条件为假,则求解表达式3,表达式3的值就是整个条件表达式的值.例如:

(a>=0)?a:-a 　　执行结果是a的绝对值.

- 在程序中,通过把条件表达式的值直接赋予某个变量.例如:

min=(a<b)?a:b　　执行结果就是将条件表达式的值赋予变量min,即将a和b二者中较小的数赋给min.

- 条件表达式的优先级别仅高于赋值运算符,而低于前面遇到过的所有运算符.

因此,min=(a<b)?a:b括号可以不要,可直接写成,min=a<b?a:b如果有x<y?x+1:y-1等效于x<y(x+1):(y-1)而不等效于(x<y?x+1:y)-1

- 条件运算符的结合方向为"自右至左".
- 条件表达式允许嵌套,即允许条件表达式中的表达式2和表达式3又是一个条件表达式.例如:

```
x>0?1:x<0?-1:0
```
上述条件表达式中,表达式3部分又是一个条件表达式.根据条件表达式的结合性,上述条件表达式等价于:

>  　 x>0?1:(x<0?-1:0)

其作用是判断x的符号情况.当x为正数时,该条件表达式的值为1;当x为负数时,该条件表达式的值为-1;当x为0时,该条件表达式的值为0.

- 条件表达式不能取代一般的if语句,仅当if语句中内嵌的语句为赋值语句(且两个分支都给同一变量赋值)时才能代替if语句.例如:

```c
if(a%2==0)
　　　printf("even/n");
　　　else
    　　　printf("odd/n"
```
);

不能写成:


```c
(a%2==0)?printf("even/n"):printf("odd/n");
```

　　　　　　但可以用下面语句代替:

```c
printf("%s/n",(a%2==0?"even":"o
```
dd");

　该语句的作用是:若 a 为偶数,输出 even;若 a 为奇数,输出odd.

- 表达式1,表达式2,表达式3的类型可以不同.此时条件表达式的值的类型为它们中较高的类型.例如:

```c
main() {

　　　　　　　　　　char c1, ch;

　　　　　　　　　　ch = getchar();

　　　　　　　　　　c1 = ch <= 'Z' && ch >= 'A' ? ' @ ' : ch ;

　　　　　　　　　　putchar(c1);

　　　　　　　　}
```


该程序的作用是从键盘输入任意一个字符,判别它们是否大写字母,如果是,输出一个@;否则按原样输出 dot

上例中,程序第6行是关键语句,该语句实现输入字符的判断,选择与更换工作.

其执行过程为:先由此语句中的赋值号右侧的条件运算符对输入的字符进行判断和选择,若ch>='A'&&ch<='Z'成立,说明ch是大写英文字母,此时选@;否则仍选原字符ch,然后把选择的结果赋值给原变量ch 。
